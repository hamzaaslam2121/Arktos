---
// src/pages/orders.astro
import { Icon } from "astro-icon/components";
import { SignedIn, SignedOut,  } from "@clerk/astro/components";

// Placeholder order data (replace with actual data fetching)
const orders = [
  {
    id: 12345,
    date: "2023-10-27",
    total: 99.99,
    status: "Completed",
    items: [
      { name: "Product A", quantity: 2, price: 29.99 },
      { name: "Product B", quantity: 1, price: 39.99 },
    ],
  },
  // Add more orders here...
];
---

  <SignedIn>
    <div class="container mx-auto px-4 py-12">
      <h1 class="text-3xl mb-6">Your Orders</h1>

      {orders.length === 0 ? (
        <p>You have no previous orders.</p>
      ) : (
        <ul class="space-y-6">
          {orders.map((order) => (
            <li
              class="bg-white shadow-md rounded-lg overflow-hidden"
            >
              <div class="p-4 border-b">
                <div class="flex justify-between items-center">
                  <div>
                    <span class="text-gray-600">Order #:</span>{" "}
                    {order.id}
                  </div>
                  <span
                    class={`inline-block px-2 py-1 text-xs rounded-full ${
                      order.status === "Completed"
                        ? "bg-green-200 text-green-800"
                        : order.status === "Pending"
                        ? "bg-yellow-200 text-yellow-800"
                        : "bg-gray-200 text-gray-800"
                    }`}
                  >
                    {order.status}
                  </span>
                </div>
                <div class="text-gray-600 text-sm">
                  {new Date(order.date).toLocaleDateString()}
                </div>
              </div>
              <div class="p-4">
                <h3 class="font-medium mb-2">Order Summary</h3>
                <ul class="border-t">
                  {order.items.map((item) => (
                    <li class="flex justify-between py-2 border-b">
                      <span>{item.name}</span>
                      <span>
                        {item.quantity} x ${item.price.toFixed(2)}
                      </span>
                    </li>
                  ))}
                </ul>
                <div class="flex justify-end mt-4 font-medium">
                  Total: ${order.total.toFixed(2)}
                </div>
                {/* Optional: Add a button to view more details 
                    or a link to an order details page */}
              </div>
            </li>
          ))}
        </ul>
      )}
    </div>
  </SignedIn>

  <SignedOut>
    <div class="container mx-auto px-4 py-12 text-center">
      <Icon name="mdi:login" class="text-gray-400 h-24 w-24 mx-auto mb-4" />
      <p>Please sign in to view your orders.</p>
    </div>
  </SignedOut>
